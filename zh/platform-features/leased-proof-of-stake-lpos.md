# 权益证明租赁（LPoS）概观

任何区块链都需要一个机制来决定哪一个区块链是有效的，并且确保不会出现双重支出\(例如，向不同的分支机构发送相同的货币\)。 有几种方法可以实现这一点。
Waves使用所谓的“权益证明”一致性算法。在这里，我们将描述它，并与已广泛使用的工作量证明算法进行比较，例如，比特币。

由于每个区块链是分散的“节点”系统\(或电脑确认网络上发生的交易并在整个系统中保持去中心化的一致意见\)，对于这些节点，又被称为工作量证明系统中的“矿工” ，或在权益证明系统中被称为“验证者”，是很重要的。这些节点将被激励以持续确认交易。而“矿工”或“验证者”节点确认事务的方式以及这些节点是如何被激励的，是工作量证明和权益证明之间的主要区别。

# 1. 工作量证明 \(PoW\) {#LeasedProofofStake(LPOS)-Proof-of-Work(PoW)}

工作量证明是一种共识算法，它需要区块生成器执行昂贵的计算机计算，也称为开采，这需要被执行，以便在一个名为区块链的分布式分类账上创建一个新的无需信任交易组\(所谓的区块\)。

开采服务有两个目的：

1. 要生成一个可以被认为是唯一主链的区块链\(因为创建替代链非常耗费资源\)。

2. 通过奖励矿工执行先前的任务来创造新的代币\(增加总供应\)。

**当你想设置一个交易时，以下是幕后发生的事情:**

* 交易被打包成一个区块。

* 矿工验证在每个区块内的交易都是有效的。

* 然后，矿工们应该解决一个数学难题，以产生一个有效的区块。

* 解决了被认为是有效的难题，并存储所有散播到网络中的节点在公共区块链中。

* 对首位解决每个区块问题的矿工给予奖励。

这个“数学难题”有一个关键特征:不对称。实际上，该工作必须在请求方方面进行适当的努力，但对网络进行检查是很容易的。这个概念也被称为CPU成本函数、客户端谜题、计算谜题或CPU价格函数。所有的网络矿工都争先恐后地想要找到一个解决数学问题的方法，而这个问题与候选区块有关，这个问题在其他方面是无法用蛮力来解决的，所以基本上需要大量的尝试。当一名矿工解决方案时，他/她同时向整个网络宣布，就此获得了协议所提供的加密货币奖\(奖励\)。

“51%攻击”指的是对区块链系统的攻击。采用控制网络上的大部分计算能力，攻击者可以通过执行“双重花费”攻击来释放他的新分叉并重新获得他的硬币，这将允许他自己的硬币被多次使用。攻击者可以将硬币用在一个地方,让硬币正常进入区块链直到通过确认要求,然后让他们51%的矿工用伪造的区块链的分叉来制造这些硬币，让他们重新使用这些硬币。理论上，只要攻击者保持51%的控制，就可以重复下去。

工作量证明网络的优点是，在对系统进行重要的更改时，大部分的投票权力被分配给了矿工、开发人员和社区的其他关键成员。与此同时，在权益证明的网络中，主要的利益相关者在不考虑社区、企业、矿工和开发商的意愿的情况下有技术上的能力做出任何改变。

这种投票权的集中化以及对网络的控制本质上破坏了基于分布式账薄的加密货币，因为为了避免出现中央机构，它违背了其分配网络内所有元素的全部原则。

## 1.1 工作量证明系统的缺点 {#LeasedProofofStake(LPOS)-Proof-of-Workdownsides}

* 需要更多的电力，成为矿工的成本。
* 昂贵的高计算能力的硬件
* 如果回报更好的话，有可能矿工们会租赁他们的硬件来开采一枚不同的硬币\(忠诚度\)。
* 随着越来越多的硬币\(如更多的比特币\)被释放，矿工们的奖励会随着硬币变得稀缺而下降。

# 2. 权益证明系统 \(PoS\) {#LeasedProofofStake(LPOS)-Proof-of-Stake(PoS)}

权益证明系统是验证交易并实现分布式共识的一另一种方式。 其目的与工作量证明是相同的，但达成目标的过程却完全不同。

在PoW中，矿工的区块数量与他投资的硬件资源和能源的数量成正比。相反，在PoS中，人们可以根据他或她持有的硬币数量来进行或验证区块交易。因此，与工作证明不同的是，新区块的创建者实际上是随机选择的，增加了大量的风险，增加了在链中添加区块的可能性。

通常，在PoS系统中，没有区块奖励，所以，矿工反而会收取交易费用。这就是为什么矿工通常被称为区块伪造者或生成器，如图1。

在PoS中，攻击者需要获得51%的加密货币才能执行51%的攻击。权益证明系统通过对拥有51％加密货币股份的矿工来说不利于攻击网络而避免了这种“悲剧”。 尽管累积51％的知名数字硬币是困难和昂贵的，但拥有51％股权的矿工不会以他拥有多数股份攻击网络作为他最大利益。 如果加密货币的价值下降，这意味着他持有的股票价值也会下降，所以大股东会更加积极地维持一个安全的网络。

PoS必须制约以避免某些类型的攻击：

* 要生成的最小WAVES数量为1000 WAVES。
* 当余额增加时，1000区块之后将增加余额。

## 2.1 为什么我们使用权益证明系统 {#LeasedProofofStake(LPOS)-WhyweuseProof-of-Stake}

* 权益证明系统的重要优势包括能源效率。
* Waves实施权益证明方法以获得更加环保和更便宜的分布式共识。
* 在股权证明中，伪造者总是那些拥有铸造硬币的人。

![](/_assets/PoW.png) 图1 PoW 对比 PoS

# 3. 权益证明系统租赁 \(LPoS\) {#LeasedProofofStake(LPOS)-LeasedProof-of-Stake(LPoS)}

LPoS是权益证明系统的增强版本。 在常规的权益证明系统中，每个拥有一定数量的加密货币的节点都有资格将下一个区块添加到区块链中，但在LPoS系统中，在Waves平台上，用户可以将其余额租赁给完整节点。通过使用LPOS，用户可以将WAVES从钱包租赁给不同的承包商，并支付一定比例的报酬。 被租赁到一个完整节点的金额越大，被选中的完整节点产生下一个区块的可能性就越大。如果选中了完整的节点来生成下一个区块，那么租赁者将收到完整节点收集的交易费用的百分比。

在权益证明系统租赁里，用户可以选择运行一个完整节点或将其股份租赁给一个获得奖励的完整节点。该系统允许任何人参与Waves网络的维修。

用户可以通过在任何有网络的浏览器的电脑或移动设备租出waves，因为waves提供了一个不需要“矿工”的轻客户端解决方案，即租用他们的余额来存储整个区块链或者让钱包运行，图2。

![](/_assets/Webp.net-resizeimage-2.jpg)  
图2，LPOS 系统

## 3.1 租赁你的waves所带来的好处 {#LeasedProofofStake(LPOS)-BenefitsofleasingyourWAVES}

安全性\(你的waves永远不会离开你的钱包\)::

* 节点操作员可以通过您的挖矿能力生成区块，而用户甚至不必发送他们的WAVES。
* 租赁是安全的，因为硬币永远不会离开你的钱包。
* 用户可以通过点击按钮来中止租赁，然后只需等待取消租赁交易完成即可,图2。
* 租赁时唯一需要考虑的是选择正确的节点运营商，因为运营商节点工作效率不同，其发送的收入百分比也不同。

运行节点所需的最小余额值

* 操作员不需要投入大量资金来操作节点。
* 节点余额可以是空的，直到有足够的人希望通过将产生的1000个waves的余额在一起并创建一个池，才能将其租赁。

获取奖励：

* 矿工可以根据自己的情况给租赁人一部分奖励。
* 网络上进行的交易越多，租赁者获得的奖励就越多。
* 这些奖励主要以WAVES，但也可以接受采用具有独特的Waves功能的其他代币，作为费用。

# 3.2 租赁交易 {#LeasedProofofStake(LPOS)-LeasingTransactions}

## 3.2.1 创建租赁交易 {#LeasedProofofStake(LPOS)-CreateLeasingTransaction}

```
"Id": 9q7X84wFuVvKqRdDQeWbtBmpsHt9SXFbvPPtUuKBVxxr ,
"sender" : 3HgqG68qfeVz5dqbyvqnxQceFaH49xmGvUS ,
"fee" : 0.001,
"amount" : 10,
"recipient address" : 3HQanDJhZSsSLbCjTCsMYpPvuj2ieGwKwQ9"
"timestamp":46305781705234713
```

## 3.2.2 取消租赁交易 {#LeasedProofofStake(LPOS)-CancelLeasingTransaction}

```
"sender" : 3HgqG68qfeVz5dqbyvqnxQceFaH49xmGvUS ,
"leaseId": 9q7X84wFuVvKqRdDQeWbtBmpsHt9SXFbvPPtUuKBVxxr
```

# 3.2.3 有用的租赁链接 {#LeasedProofofStake(LPOS)-Usefullinksforleasing}

有关租用您的waves分步指南，请点击[此处](/waves-client/account-management/waves-leasing.md).

有关生成器列表，请点击[此处](http://dev.pywaves.org/generators/).

有关waves节点，请点击[此处](https://wavesplatform.com/leasing#nodes).
