
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Create Your First crypto Trading Bot Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tree-shaper/tree-shaper.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-inline-codes/inline-codes.css?cacheBreaker=1">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-github-gist/github-gist.css?cacheBreaker=1">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pretty-hint/pretty-hint.css?cacheBreaker=1">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pretty-link/pretty-link.css?cacheBreaker=3">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-headers-with-anchors/headers-with-anchors.css?cacheBreaker=1">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="../examples.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../overview/how-to-use-this-guide.html">
            
                <a href="../../overview/how-to-use-this-guide.html">
            
                    
                    How to Use This Guide?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../">
            
                <a href="../../">
            
                    
                    What is Neel Platform?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../overview/platform-components.html">
            
                <a href="../../overview/platform-components.html">
            
                    
                    Platform Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../overview/waves-official-resources.html">
            
                <a href="../../overview/waves-official-resources.html">
            
                    
                    Neel Official Resources 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../overview/security-notes.html">
            
                <a href="../../overview/security-notes.html">
            
                    
                    Security Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../overview/waves-releases.html">
            
                <a href="../../overview/waves-releases.html">
            
                    
                    Neel Releases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../overview/waves-tokens.html">
            
                <a href="../../overview/waves-tokens.html">
            
                    
                    Neel Tokens
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Platform Features</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../platform-features/decentralized-cryptocurrency-exchange-dex.html">
            
                <a href="../../platform-features/decentralized-cryptocurrency-exchange-dex.html">
            
                    
                    Decentralized Exchange (DEX)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../platform-features/assets-custom-tokens.html">
            
                <a href="../../platform-features/assets-custom-tokens.html">
            
                    
                    Tokens
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../platform-features/activation-protocol.html">
            
                <a href="../../platform-features/activation-protocol.html">
            
                    
                    Activation Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../platform-features/neel-ng-protocol.html">
            
                <a href="../../platform-features/neel-ng-protocol.html">
            
                    
                    Neel-NG Protocol
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../getting-started/as-a-developer.html">
            
                <a href="../../getting-started/as-a-developer.html">
            
                    
                    As a Developer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../getting-started/as-a-node-owner.html">
            
                <a href="../../getting-started/as-a-node-owner.html">
            
                    
                    As a Node Owner
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../getting-started/as-a-user.html">
            
                <a href="../../getting-started/as-a-user.html">
            
                    
                    As a User
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Neel Full Node</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../neel-full-node/what-is-a-full-node.html">
            
                <a href="../../neel-full-node/what-is-a-full-node.html">
            
                    
                    What is Neel Full Node 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../../neel-full-node/how-to-install-a-node/how-to-install-a-node.html">
            
                <a href="../../neel-full-node/how-to-install-a-node/how-to-install-a-node.html">
            
                    
                    How To Install a Node
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="../../neel-full-node/how-to-install-a-node/on-mac.html">
            
                <a href="../../neel-full-node/how-to-install-a-node/on-mac.html">
            
                    
                    On Mac
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="../../neel-full-node/how-to-install-a-node/on-windows.html">
            
                <a href="../../neel-full-node/how-to-install-a-node/on-windows.html">
            
                    
                    On Windows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="../../neel-full-node/how-to-install-a-node/on-ubuntu.html">
            
                <a href="../../neel-full-node/how-to-install-a-node/on-ubuntu.html">
            
                    
                    On Ubuntu
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../../neel-full-node/how-to-build-and-test-a-node.html">
            
                <a href="../../neel-full-node/how-to-build-and-test-a-node.html">
            
                    
                    How to Build and Test a Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../../neel-full-node/options-for-getting-actual-blockchain.html">
            
                <a href="../../neel-full-node/options-for-getting-actual-blockchain.html">
            
                    
                    Options for Getting Actual Blockchain
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.4.1" data-path="../../neel-full-node/options-for-getting-actual-blockchain/state-downloading-and-applying.html">
            
                <a href="../../neel-full-node/options-for-getting-actual-blockchain/state-downloading-and-applying.html">
            
                    
                    State Downloading and Applying
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4.2" data-path="../../neel-full-node/options-for-getting-actual-blockchain/export-and-import-from-the-blockchain.html">
            
                <a href="../../neel-full-node/options-for-getting-actual-blockchain/export-and-import-from-the-blockchain.html">
            
                    
                    Export and Import From The Blockchain
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../../neel-full-node/upgrading.html">
            
                <a href="../../neel-full-node/upgrading.html">
            
                    
                    Upgrading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../../neel-full-node/how-to-rollback-a-node.html">
            
                <a href="../../neel-full-node/how-to-rollback-a-node.html">
            
                    
                    How to Rollback a Node
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="../../neel-full-node/neel-node-in-docker.html">
            
                <a href="../../neel-full-node/neel-node-in-docker.html">
            
                    
                    neel Node in Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="../../neel-full-node/configuration-parameters.html">
            
                <a href="../../neel-full-node/configuration-parameters.html">
            
                    
                    Node Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.9" data-path="../../neel-full-node/logging-configuration.html">
            
                <a href="../../neel-full-node/logging-configuration.html">
            
                    
                    Logging Configuration
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Development and API</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="../client-libraries.html">
            
                <a href="../client-libraries.html">
            
                    
                    Client Libraries
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../client-libraries/pyneel.html">
            
                <a href="../client-libraries/pyneel.html">
            
                    
                    PyNeel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="../client-libraries/neel-java-library.html">
            
                <a href="../client-libraries/neel-java-library.html">
            
                    
                    Neel Java Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="../client-libraries/neeltx.html">
            
                <a href="../client-libraries/neeltx.html">
            
                    
                    NeelTx
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="../dex-api.html">
            
                <a href="../dex-api.html">
            
                    
                    DEX API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../dex-api/matcher.html">
            
                <a href="../dex-api/matcher.html">
            
                    
                    Matcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="../neel-node-rest-api.html">
            
                <a href="../neel-node-rest-api.html">
            
                    
                    Neel Node Rest API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1" data-path="../neel-node-rest-api/address.html">
            
                <a href="../neel-node-rest-api/address.html">
            
                    
                    Address
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.2" data-path="../neel-node-rest-api/lease-transactions.html">
            
                <a href="../neel-node-rest-api/lease-transactions.html">
            
                    
                    Lease Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3" data-path="../neel-node-rest-api/asset-transactions.html">
            
                <a href="../neel-node-rest-api/asset-transactions.html">
            
                    
                    Assets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.3.1" data-path="../neel-node-rest-api/asset-transactions/public-functions.html">
            
                <a href="../neel-node-rest-api/asset-transactions/public-functions.html">
            
                    
                    Public Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3.2" data-path="../neel-node-rest-api/asset-transactions/private-functions.html">
            
                <a href="../neel-node-rest-api/asset-transactions/private-functions.html">
            
                    
                    Private Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3.3" data-path="../neel-node-rest-api/asset-transactions/distribution-methods.html">
            
                <a href="../neel-node-rest-api/asset-transactions/distribution-methods.html">
            
                    
                    Distribution Methods
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3.4" data-path="../neel-node-rest-api/alias-transaction.html">
            
                <a href="../neel-node-rest-api/alias-transaction.html">
            
                    
                    Alias Transaction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.5" data-path="../neel-node-rest-api/transactions.html">
            
                <a href="../neel-node-rest-api/transactions.html">
            
                    
                    Transactions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.6" data-path="../neel-node-rest-api/peers.html">
            
                <a href="../neel-node-rest-api/peers.html">
            
                    
                    Peers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.7" data-path="../neel-node-rest-api/blocks.html">
            
                <a href="../neel-node-rest-api/blocks.html">
            
                    
                    Blocks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.8" data-path="../neel-node-rest-api/utils.html">
            
                <a href="../neel-node-rest-api/utils.html">
            
                    
                    Utils
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.9" data-path="../neel-node-rest-api/example-transactions.html">
            
                <a href="../neel-node-rest-api/example-transactions.html">
            
                    
                    Examples of Transactions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="../examples.html">
            
                <a href="../examples.html">
            
                    
                    Examples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.4.1" data-path="trading-bot.html">
            
                <a href="trading-bot.html">
            
                    
                    Create Your First crypto Trading Bot
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Create Your First crypto Trading Bot</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="create-your-first-crypto-trading-bot"><a class="wd-go wd-go_for_header-anchor" id="section-bc362a7e1db6fa928ec1a7f7f23f28ba" href="#section-bc362a7e1db6fa928ec1a7f7f23f28ba">Create your first crypto trading bot</a></h1>
<h3 id="introduction"><a class="wd-go wd-go_for_header-anchor" id="section-8800e1c9b3e22c44ba59a34db3fe4841" href="#section-8800e1c9b3e22c44ba59a34db3fe4841">Introduction</a></h3>
<p>Waves platform is designed and built from the ground up for speed and scale. At the same time Waves is one of the most developer-friendly ecosystems. Waves blockchain exposes its functionality through a powerful REST API, that can be used with any programming language.</p>
<p>This text guides you through the basics of Waves Node Rest API. Here we will use python wrapper for the API&#x200A;&#x2014;&#x200A;<a href="https://github.com/PyWaves/PyWaves" target="_blank">PyWaves</a> library, but there are other options for different programming languages, e.g. <a href="https://github.com/wavesplatform/WavesCS" target="_blank">WavesCS for C#</a>, <a href="https://github.com/wavesplatform/WavesJ" target="_blank">WavesJ for Java</a> etc.</p>
<p>Pywaves is an object-oriented Python interface to the Waves blockchain, which will help us to reduce code complexity while maintaining its structure, so anything you learn using this library can be applied with pure HTTP API calls.</p>
<h3 id="what-is-waves-node-rest-api"><a class="wd-go wd-go_for_header-anchor" id="section-7fb4dda9ce03fcaae8e747e2eaa64a4c" href="#section-7fb4dda9ce03fcaae8e747e2eaa64a4c">What is Waves Node REST API</a></h3>
<p>Waves Platform is a little bit complex and consists of a lot of components:</p>
<p>Waves Full Node performs almost like all other decentralized-cryptocurrencies: keeps a full-copy of the blockchain, verifies the transactions. The main differences are convenient REST API and DEX(Matcher).</p>
<p>Note: DEX(matcher) is disabled in default configuration file.
Node REST API allows working with Waves Blockchain like with many other centralized platforms, e.g. Google, Facebook etc. In official Wavesplatform&#x2019;s Github repository, you can find RPC API documentation and description of used data structures. If you prefer API docs in Postman interface you can follow the link</p>
<h3 id="terms"><a class="wd-go wd-go_for_header-anchor" id="section-6f493bf6f3beb9d46a9c649d2f7ddd29" href="#section-6f493bf6f3beb9d46a9c649d2f7ddd29">Terms</a></h3>
<p><strong>Node&#x200A; </strong> &#x2014; Full Node, it contains full-copy of the blockchain.</p>
<p><strong>Matcher (DEX)&#x200A;</strong> &#x2014;&#x200A; part of a full node. Matcher nodes are responsible for pairing orders and executing trades quickly, whilst they are still settled on the blockchain. When a user sends an order to Matcher he doesn&#x2019;t transfer ownership of his money to anyone, his money remains on his account until the order is matched with counter-order. More details can be found here and here.</p>
<p><strong>AssetPair</strong> &#x200A;&#x2014;&#x200A; Pair of assets we want to exchange.</p>
<h3 id="trading-strategy"><a class="wd-go wd-go_for_header-anchor" id="section-da96199665c3abea4c343f0f89d7cfa8" href="#section-da96199665c3abea4c343f0f89d7cfa8">Trading strategy</a></h3>
<p>Scalping trading strategy widely used in trading, and crypto community is not an exception. There are a lot of variations of the strategy, the main difference between them is in size of timeframe. The strategy exploits small changes in currency prices: it buys at the mean price minus some step and sells at the mean price plus some step, in order to gain the bid/ask difference. It normally involves establishing and liquidating a position quickly, in this case within 15 seconds.</p>
<p>Disclaimer: I do not suggest to use scalping strategy. The strategy was chosen because of its simplicity for implementing in a bot.
The bot with initial parameters trades on Waves-BTC pair (Waves is an amount asset and BTC is a <code>price_asset</code>). The spread mean price is <code>(best_bid + best_ask) / 2</code>. The price step is <code>0.5%</code> from the mean price. The bot places the buy order at price <code>meanprice * (1 - price_step)</code> and the amount <code>(BTC_balance / bid_price) - order_fee</code>. The sell order is placed at <code>meanprice * (1 + price_step)</code> and the amount equal to <code>Waves_balance - order_fee</code>.</p>
<h3 id="lets-code-step-by-step"><a class="wd-go wd-go_for_header-anchor" id="section-dad39be2f62810584c6e681f2a418dd0" href="#section-dad39be2f62810584c6e681f2a418dd0">Let&#x2019;s code, step-by-step</a></h3>
<p>So, let&#x2019;s get started! We&#x2019;ll use Pywaves and configparser libraries for API calls and reading config file. Let&apos;s install them:</p>
<pre><code class="lang-python">pip install pywaves
pip install configparser
</code></pre>
<p>It&#x2019;s better to make configuration file where we will store all sensitive and customizable settings. A common way for the task in python ecosystem is .cfg format. The main section of the file will contain general settings of the bot:</p>
<pre><code class="lang-python">[main]
<span class="hljs-comment"># URI of the Full Node</span>
node = http://<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
<span class="hljs-comment"># select the network: testnet or mainnet</span>
network = mainnet
<span class="hljs-comment"># DEX matcher</span>
matcher = http://nodes.wavesnodes.com
order_fee = <span class="hljs-number">300000</span>
<span class="hljs-comment"># order lifetime in seconds, max allowed 29 days</span>
order_lifetime = <span class="hljs-number">86400</span>
Additionally bot requires account <span class="hljs-keyword">and</span> market details.

[account]
private_key = XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
[market]
amount_asset = WAVES
price_asset = XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
</code></pre>
<p>First of all, we should import all dependencies. Besides already mentioned pywaves and configparser we need next:</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> pywaves <span class="hljs-keyword">as</span> pw
<span class="hljs-keyword">import</span> datetime <span class="hljs-keyword">from</span> time
<span class="hljs-keyword">import</span> sleep <span class="hljs-keyword">import</span> math <span class="hljs-keyword">import</span> os <span class="hljs-keyword">import</span> configparser
</code></pre>
<p>Great, now we will define SimpleBot class as a wrapper of settings. We can set default settings in the constructor:</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span><span class="hljs-params">(self)</span>:</span>
  self.log_file = <span class="hljs-string">&quot;bot.log&quot;</span>
  self.node = <span class="hljs-string">&quot;https://nodes.wavesnodes.com&quot;</span>
  self.chain = <span class="hljs-string">&quot;mainnet&quot;</span>
  self.matcher = <span class="hljs-string">&quot;https://nodes.wavesnodes.com&quot;</span>
  self.order_fee = int(<span class="hljs-number">0.003</span> * <span class="hljs-number">10</span> ** <span class="hljs-number">8</span>)
  self.order_lifetime = <span class="hljs-number">29</span> * <span class="hljs-number">86400</span>  <span class="hljs-comment"># 29 days</span>
  self.private_key = <span class="hljs-string">&quot;&quot;</span>
  self.amount_asset = pw.WAVES
  self.price_asset_id = <span class="hljs-string">&quot;8LQW8f7P5d5PZM7GtZEBgaqRPGSzS3DfPuiXrURJ4AJS&quot;</span> <span class="hljs-comment"># BTC</span>
  self.price_asset = pw.Asset(self.price_asset_id)
  self.price_step = <span class="hljs-number">0.005</span>
  self.min_amount = <span class="hljs-number">1</span>
  self.seconds_to_sleep = <span class="hljs-number">15</span>
</code></pre>
<p>SimpleBot also has a method for parsing configuration file and storing it in object fields, its simple enough with the configparser :</p>
<pre><code class="lang-python">config = configparser.RawConfigParser()
config.read(cfg_file)
self.node = config.get(<span class="hljs-string">&apos;main&apos;</span>, <span class="hljs-string">&apos;node&apos;</span>)
self.chain = config.get(<span class="hljs-string">&apos;main&apos;</span>, <span class="hljs-string">&apos;network&apos;</span>)
...
</code></pre>
<p>Using our new class SimpleBot and Pywaves library we finally can implement our business logic.</p>
<p>Pywaves requires some configuration before usage, all available methods are listed here, in our case, it&#x2019;s enough to set:</p>
<pre><code class="lang-python">pw.setNode(node=bot.node, chain=bot.chain)
pw.setMatcher(node=bot.matcher)
</code></pre>
<p>We also need and an instance of our address:</p>
<pre><code class="lang-python">my_address = pw.Address(privateKey=bot.private_key)
</code></pre>
<p>Pywaves method AssetPair creates a new AssetPair object with 2 asset objects, which we&#x2019;d like to trade:</p>
<pre><code class="lang-python">waves_btc = pw.AssetPair(bot.amount_asset, bot.price_asset)
</code></pre>
<p>In our simple example, amount asset is WAVES, price asset is BTC, but it can be changed in the config file.</p>
<p>Scalping trading strategy implies infinite trading with selected timeframe size, in our case 15 sec. Let&#x2019;s define an infinite loop, where we&#x2019;ll :</p>
<ul>
<li>Get Waves and BTC balances.</li>
<li>Get orderBook of our AssetPair. It provides python dictionary with bids and asks amounts</li>
<li>Calculate mean spread price</li>
<li>Calculate bid and ask</li>
<li>Calculate bid and ask amounts</li>
<li>Post buy and sell orders</li>
</ul>
<pre><code class="lang-python"><span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>:
  <span class="hljs-comment"># Get waves balance</span>
  waves_balance = my_address.balance()
  <span class="hljs-comment"># Get btc balance</span>
  btc_balance = my_address.balance(bot.price_asset_id)
  <span class="hljs-comment"># Get order book</span>
  order_book = waves_btc.orderbook()
  <span class="hljs-comment"># Get best bid and ask</span>
  best_bid = order_book[<span class="hljs-string">&quot;bids&quot;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&quot;price&quot;</span>]
  best_ask = order_book[<span class="hljs-string">&quot;asks&quot;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&quot;price&quot;</span>]
  spread_mean_price = (best_bid + best_ask) // <span class="hljs-number">2</span>
  bid_price = spread_mean_price * (<span class="hljs-number">1</span> - bot.price_step)
  ask_price = spread_mean_price * (<span class="hljs-number">1</span> + bot.price_step)
  bid_amount = int((btc_balance / bid_price) * <span class="hljs-number">10</span> **         pw.WAVES.decimals) - bot.order_fee
  ask_amount = int(waves_balance) - bot.order_fee
  <span class="hljs-comment"># Send orders</span>
  <span class="hljs-keyword">if</span> bid_amount &gt;= bot.min_amount:
  my_address.buy(assetPair=waves_btc, amount=bid_amount,   price=bid_price, matcherFee=bot.order_fee,
  maxLifetime=bot.order_lifetime)
  <span class="hljs-keyword">if</span> ask_amount &gt;= bot.min_amount:
  my_address.sell(assetPair=waves_btc, amount=ask_amount,   price=ask_price, matcherFee=bot.order_fee,
maxLifetime=bot.order_lifetime)
  <span class="hljs-comment"># Wait for the next tick</span>
  sleep(bot.seconds_to_sleep)
</code></pre>
<p>We&#x2019;re done. Your first trading bot is ready to go!</p>
<p>Best of all, the source code and documentation for this example are released to the public domain, so you can start by grabbing the code and building on top of it.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../examples.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Examples">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Create Your First crypto Trading Bot","level":"5.4.1","depth":2,"previous":{"title":"Examples","level":"5.4","depth":1,"path":"development-and-api/examples.md","ref":"development-and-api/examples.md","articles":[{"title":"Create Your First crypto Trading Bot","level":"5.4.1","depth":2,"path":"development-and-api/examples/trading-bot.md","ref":"development-and-api/examples/trading-bot.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["custom-js-css","tree-shaper@git+https://github.com/KardanovIR/gitbook-plugin-tree-shaper.git","inline-codes@git+https://github.com/Shushik/gitbook-plugin-inline-codes.git","github-gist@git+https://github.com/Shushik/gitbook-plugin-github-gist.git","pretty-hint@git+https://github.com/Shushik/gitbook-plugin-pretty-hint.git","pretty-link@git+https://github.com/Shushik/gitbook-plugin-pretty-link.git","headers-with-anchors@git+https://github.com/Shushik/gitbook-plugin-headers-with-anchors.git","custom-favicon","livereload"],"pluginsConfig":{"gtm":{"token":"GTM-P2JT7Z","virtualPageViews":true},"tree-shaper":{},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"github-gist":{},"pretty-link":{},"fontsettings":{"theme":"white","family":"sans","size":2},"inline-codes":{},"highlight":{},"favicon":"/_theme/favicon.ico","custom-favicon":{},"custom-js-css":{"js":[],"css":[]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"headers-with-anchors":{},"pretty-hint":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"development-and-api/examples/trading-bot.md","mtime":"2019-02-12T14:06:02.171Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-15T06:05:30.340Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-tree-shaper/tree-shaper.js?cacheBreaker=91ca1700d7a3010e896528cd38d4c291"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-inline-codes/inline-codes.js?cacheBreaker=1"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

